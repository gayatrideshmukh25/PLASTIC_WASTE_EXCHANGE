<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Waste Pickup Request</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="/style.css" rel="stylesheet">
  <!-- <style>
    :root{
      --primary:#28a745;
      --secondary:#28a745;
      --bg:#f8fafc;
      --text:#1a202c;
      --card-bg:#ffffff;
      --border:#e2e8f0;
    }
    body{
      font-family:'Poppins',sans-serif;
      background:var(--bg);
      color:var(--text);
      margin:0;
      padding:0;
      overflow-x: hidden;
overflow-y: auto;
      display:flex;
      min-height:100vh;
      flex-direction:column;
      align-items:center;
    }
    
    header{
         width:100%;
      background:var(--primary);
      color:white;
      padding:15px 20px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      box-shadow:0 2px 6px rgba(0,0,0,0.1);
    }
      header h1 {
            color: white;
            font-size: 20px;
            display: flex;
            align-items: center;
        }
    /* header h2{margin: 13px;;font-weight:600;} */
    main{
      flex:1;
      display:flex;
      justify-content:center;
      align-items:center;
      width:100%;
      padding:2rem 1rem;
    }
    .card{
      width:100%;
      max-width:750px;
      background:var(--card-bg);
      border:1px solid var(--border);
      border-radius:12px;
      padding:24px;
      box-shadow:0 4px 12px rgba(0,0,0,0.05);
      transition:box-shadow 0.3s;
    }
    .card:hover{box-shadow:0 6px 18px rgba(0,0,0,0.08);}
    h1{font-size:1.5rem;margin-bottom:1rem;color:var(--primary);text-align:center;}
    form{display:grid;grid-template-columns:1fr 1fr;gap:16px;}
    label{font-size:0.9rem;margin-bottom:6px;display:block;}
    input,select,textarea{
      width:100%;
      padding:10px;
      border:1px solid var(--border);
      border-radius:8px;
      font-size:0.95rem;
      transition:border-color 0.3s,box-shadow 0.3s;
    }
    input:focus,select:focus,textarea:focus{
      outline:none;
      border-color:var(--secondary);
      box-shadow:0 0 0 2px rgba(49,130,206,0.2);
    }
    textarea{min-height:90px;resize:vertical;}
    .full{grid-column:1 / -1;}
    .actions{
      grid-column:1 / -1;
      display:flex;
      justify-content:center;
      gap:10px;
      margin-top:1rem;
    }
    button{
      background:var(--primary);
      color:white;
      border:none;
      padding:10px 18px;
      border-radius:8px;
      font-size:1rem;
      cursor:pointer;
      transition:background 0.3s,transform 0.1s;
    }
    button:hover{background:var(--secondary);}
    button:active{transform:scale(0.98);}
    .btn-secondary{
      background:transparent;
      color:var(--primary);
      border:1px solid var(--primary);
    }
    .msg{
      grid-column:1 / -1;
      padding:10px;
      border-radius:8px;
      text-align:center;
      margin-top:0.5rem;
      font-size:0.95rem;
    }
    .msg.success{background:#e6fffa;color:#065f46;}
    .msg.error{background:#ffe6e6;color:#9b2c2c;}
    footer{
      text-align:center;
      padding:1rem;
      color:#718096;
      font-size:0.9rem;
    }
    @media(max-width:640px){
      form{grid-template-columns:1fr;}
      .card{padding:16px;}
    }
  </style> -->
</head>
<body>
  <%- include ('../partials/header.ejs') %>
   <%- include ('../partials/profile.ejs') %>
  <%- include ('../partials/request.ejs') %>
 
  <footer>
    &copy; 2025 Waste Exchange System. All rights reserved.
  </footer>

  
  <script>
    
document.getElementById('findLocationBtn').addEventListener('click', () => {
  const locationStatus = document.getElementById('locationStatus');
  locationStatus.textContent = "Fetching your location...";

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(success, error);
  } else {
    locationStatus.textContent = "Geolocation not supported by your browser.";
  }

  function success(position) {
    const latitude = position.coords.latitude;
    const longitude = position.coords.longitude;
    locationStatus.textContent = `Your location: (${latitude.toFixed(4)}, ${longitude.toFixed(4)})`;

    // ðŸ“¡ Call your backend API to find nearest collector
    fetch(`/nearestCollector?lat=${latitude}&lng=${longitude}`)
      .then(res => res.json())
      .then(data => {
        const nearestDiv = document.getElementById('nearestCollector');
        if (data && data.name) {
          nearestDiv.innerHTML = `
            <p><strong>Nearest Collector:</strong> ${data.name}</p>
            <p><strong>Distance:</strong> ${data.distance} km</p>
            <p><strong>Contact:</strong> ${data.phone}</p>
          `;
        } else {
          nearestDiv.textContent = "No nearby collectors found.";
        }
      })
      .catch(() => {
        locationStatus.textContent = "Failed to fetch nearest collector.";
      });
  }

  function error() {
    locationStatus.textContent = "Unable to retrieve your location.";
  }
});


    const shortcut = document.getElementById('profile-shortcut');
    const modal = document.getElementById('profile-modal');
    const closeBtn = document.getElementById('close-modal');

    // Show modal when clicking shortcut
    shortcut.addEventListener('click', () => {
        modal.style.display = 'flex';
    });

    // Close modal
    closeBtn.addEventListener('click', () => {
        modal.style.display = 'none';
    });

    // Close when clicking outside content
    window.addEventListener('click', (e) => {
        if(e.target === modal) {
            modal.style.display = 'none';
        }
    });
</script>
</body>
</html>
